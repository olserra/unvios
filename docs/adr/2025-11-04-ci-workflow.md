# ADR 0005 â€” CI Workflow: GitHub Actions for tests

Date: 2025-11-04T00:00:00Z

Status: Accepted

## Context

The repository lacked an automated CI pipeline to run unit tests on changes. This increases the risk of regressions and makes it harder to enforce test coverage on PRs. A lightweight CI job that runs the unit tests on push/PR is a practical first step.

## Decision

Add a GitHub Actions workflow at `.github/workflows/test.yml` that:

- Runs on `push` and `pull_request` events targeting `main`.
- Uses Node.js 20 on `ubuntu-latest` and sets up `pnpm`.
- Installs dependencies with `pnpm install --frozen-lockfile` and runs `pnpm test -- --reporter verbose`.

The workflow is intentionally minimal to keep CI fast and reliable.

## Rationale

- Running unit tests automatically on PRs prevents regressions and gives immediate feedback to contributors.
- GitHub Actions is well-supported and requires no external infrastructure.
- Using `pnpm install --frozen-lockfile` ensures the lockfile is honored and that CI uses the same dependency graph as local development.

## How it runs

On each push or pull request to `main`, GitHub Actions will:

1. Checkout repository
2. Setup Node.js 20 and pnpm
3. Install dependencies
4. Run `pnpm test -- --reporter verbose`

If tests fail, the job fails and the PR shows failing checks.

## Migration / Rollback

- To remove CI, delete the workflow file. No database or runtime migrations are required for this change.

## Next steps

- Add TypeScript type-checking or build step (`pnpm build`) to the workflow to block PRs that break compilation.
- Add caching for pnpm store or node_modules to reduce CI time.
- Add integration/e2e jobs (Playwright) in a separate workflow with explicit environment setup.
- Add a CI status badge to `README.md` after the first successful run.

---

Generated by development tooling on 2025-11-04.
